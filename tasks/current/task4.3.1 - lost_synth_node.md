# Тема Инструменты мониторинга. Задание 1. Потерянный узел в Синтетик-сити.

В мегаполисе **Синтетик-Сити** вышел из строя телеметрический узел `node-alpha45.cortex.net`. Он отвечал за мониторинг энергоячеек в центральной башне кластера. Вы — инженер в корпорации _NeuroPulse_, кому поручено восстановить контроль и донастроить систему мониторинга.

## Условие задания

В каталоге `/neuro_logs/` находятся конфигурационные и лог-файлы. Ваша задача — с помощью командной строки и редактирования текстовых файлов:
1. **Найти последнюю удачную попытку сбора метрик (scrape)** от узла `node-alpha45.cortex.net` в файле `prometheus_logs/prometheus.log`.
2. **Добавить конфигурацию экспортера** в в `prometheus.yml`, если она отсутствует. Узел `node-α45.cortex.net` должен быть в job `node_exporter`.
3. **Настроить алерт** в `alerts.yml`, который сработает, если узел `node-alpha45.cortex.net` недоступен (`up == 0` в течение 2 минут).
4. **Настроить роутинг алерта** в `alertmanager.yml`, чтобы при срабатывании он отправлялся на email `admins@neuropulse.cy` через ресивер `sys_admins`.

## Советы

Используется следующая структура исходных файлов:
```
neuro_logs/
├── prometheus_logs/
│   └── prometheus.log
├── prometheus.yml            # требует правки
├── alerts.yml                # требует правки
└── alertmanager.yml          # требует правки
```

Примеры исходного содержимого (до редактирования).
`prometheus.yml`:
```
scrape_configs:
  - job_name: "node_exporter"
    static_configs:
      - targets: ["node-beta77.cortex.net"]
```

`alerts.yml`:
```
groups:
- name: basic_alerts
  rules: []
```

`alertmanager.yml`:
```
route:
  receiver: default

receivers:
  - name: default
    webhook_configs:
      - url: "http://localhost:5001/"
```

## Цели по теме Инструменты мониторинга

| Тема                            | Применение                              |
| ------------------------------- | --------------------------------------- |
| Prometheus, основные экспортеры | Настройка конфигов Prometheus           |
| Роутинг алертов                 | Настройка роутинга алертов в Prometheus |

## Автоматическая проверка 

Обратите внимание на то, что будет проверяться автоматически:

1. Ptometheus конфиг содержит нужный таргет.
2. Alert в `alerts.yml`.
3. Alertmanager route и email.

