# Тема Процессы. Задание 2. Автономный ИИ.

В 2077 году после неудачного эксперимента корпорации Arasaka в системе запущен автономный ИИ `RogueAI`, обладающий функцией самовосстановления, устойчивостью к завершению и способностью клонировать процессы. Он развернут как демон, а его форки частично выходят из `ps`-видимости, подделывают `cmdline`, игнорируют стандартные сигналы и создают зомби.

Ваша задача — найти, проанализировать, уничтожить все компоненты ИИ и исправить уязвимый код, чтобы подобное больше не повторилось.

## Условие задания

1. Запустите скрипт `start_rogue.sh` (поставляется с заданием).
2. Проанализируйте ситуацию:
	- Найдите процесс RogueAI, несмотря на подмену имени;
	- Постройте дерево процессов и выявите всех потомков;
	- Найдите всех зомби и определите причину их появления.
3. Завершите всю группу процессов с учетом `PGID`, `SID`.
4. Напишите патч для скрипта `rogue_ai.sh`, чтобы зомби-процессы не оставались. Новый скрипт назовите `rogue_ai_fixed.sh` и разместите в каталоге с исходным скриптом. Для этого:
	- Добавьте `trap 'shutdown' USR1`, где `shutdown()` корректно завершает процесс;
	- Запустите процесс, отправьте сигнал `USR1`, убедитесь, что он завершился.

## Советы

Для анализа рекомендуется использовать `/proc/<pid>/cmdline` и `stat`.

Чтобы определить причины появления зомби-процессов, изучите роль `wait`, `trap`, `SIGCHLD`.

Для корректного завершения процессов вам необходимо разобраться, в чем заключается разница между `kill -TERM <pid>` и `kill -- -PGID`. 

## Цели по теме Процессы

| Тема                             | Применение                                                 |
| -------------------------------- | ---------------------------------------------------------- |
| Нахождение, завершение процессов | Поиск маскирующихся процессов, завершение группы           |
| Сигналы                          | Отправка сигналов, в т.ч. `USR1` для пропатченного скрипта |
| Зомби процессы                   | Выявление `defunct` процессов и их завершение              |

## Автоматическая проверка

Обратите внимание на то, что будет проверяться автоматически:

1. Проверка отсутствия зомби-процессов.
2. Проверка остановки основного процесса вируса.
3. Проверка сигнала `USR1` на пропатченной версии скрипта, отправка которого должна обеспечивать корректное завершение процесса.