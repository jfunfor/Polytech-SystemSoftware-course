# Тема Systemd. Задание 3. Сборка DEB/RPM пакета для systemd сервиса киберпсов

Под улицами Чартер-Хилл существует лаборатория для дрессировки **киберпсов** — автономных боевых машин. Один из таких псов, модель `Cerberus-H7`, должен запускать процесс сбора телеметрии при загрузке. Все псы получают прошивку через `.deb`/`.rpm` пакеты.

Ваша задача: собрать корректный установочный пакет для Linux-дистрибутива. 

## Условие задания

1. Cоздать установочный пакет, имеющий следующую структуру:
```
cerberus-telemetry/
├── DEBIAN/                       # или SPECS/ для RPM
│   ├── control                   # или .spec
│   └── postinst, postrm          # скрипты
├── usr/
│   └── bin/cerberus-log.sh       # bash-скрипт
├── etc/systemd/system/
│   └── cerberus.service
```

2. Установка пакета должна:
	- Скопировать скрипт `bin/cerberus-log.sh` в `/usr/bin`;
	- Установить `systemd` unit-файл;
	- Выполнить `systemctl enable` и `start`;
	- Сервис пишет в `journal` тег `cerberus`;
	- Сервис стартует в `multi-user.target`.
3. Удаление пакета должно:
	- Остановить и отключить сервис;
	- Удалить все файлы;
	- Очистить логи (опционально).

## Советы

Пример скрипта `/usr/bin/cerberus-log.sh`:
```
#!/bin/bash
while true; do
  echo "$(date) - Cerberus telemetry: [OK]" | systemd-cat -t cerberus
  sleep 30
done
```

Пример `DEBIAN/control`
```
Package: cerberus-telemetry
Version: 1.0
Architecture: all
Maintainer: Underground Cyberware Inc.
Description: Cyberdog telemetry unit with systemd integration
Depends: systemd
```

Для сборки `.deb` пакета используйте:
```
dpkg-deb --build cerberus-telemetry
```

Информацию по сборке `.rpm` найдите самостоятельно.

Дополнительное задание: Добавьте systemd timer, чтобы скрипт запускался периодически.

## Цели по теме Systemd

| Тема                         | Применение                                           |
| ---------------------------- | ---------------------------------------------------- |
| Создание юнит-файла          | Создание systemd uint-файла согласно условию задания |
| Управление сервисами         | Управление сервисами через `systemctl`               |
| Проверка логов               | Проверка логов в journal                             |
| Создание`.deb`/`.rpm` пакета | Создание `.deb`/`.rpm` пакета в контексте systemd    |
| Сущности systemd             | Дополнительно: создание systemd timer                |

## Автоматическая проверка

Обратите внимание на то, что будет проверяться автоматически:

1. Корректная установка пакета.
2. Включение и запуск сервиса после установки.
3. Проверка логов.
4. Остановка и отключение сервиса после удаления пакета.