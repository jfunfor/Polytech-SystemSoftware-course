# Тема Bash. Задание 3. Покупки на рынке Кабуки

Вы оказались в самом сердце Найт-Сити. Здесь, среди узких петляющих улочек Кабуки, увешанных китайскими фонариками и мерцающими неоновыми вывесками, развернулся чёрный рынок, где проводятся всевозможные незаконные сделки. Тут можно купить всё: от имплантов до брейндансов, если знать, к кому обратиться. 

Ваша задача — написать Bash-скрипт, который будет симулировать процесс покупки имплантов у продавца.

## Условие задания

1. Скрипт принимает один аргумент командной строки — количество доступных евродолларов (целое число).
2. Внутри скрипта задан список товаров и их цен:
```
items=("Имплант зрения" "Нейроинтерфейс" "Кибернетическая рука" "Усилитель слуха")
prices=(1200 2300 4000 1600)
```
3. Скрипт должен выводить список товаров с их номерами и ценами.
4. Пользователь должен выбрать товар по номеру и указать количество.
5. Скрипт проверяет:
   - Достаточно ли у пользователя евродолларов.
   - Если **достаточно** — вычитает сумму и сохраняет выбор в заказ.
   - Если **недостаточно** — выводит ошибку и предлагает снова выбрать.
6. После каждой покупки спрашивать, хочет ли пользователь продолжить (ввод `y/n`).
7. В конце — выводить список заказанных товаров и оставшиеся евродоллары.

## Пример работы скрипта

```
$ ./kabuki_market.sh 5000
Добро пожаловать на рынок Кабуки!
Ваш баланс: 5000 евродолларов
Доступные товары:
[0] Имплант зрения — 1200$
[1] Нейроинтерфейс — 2300$
[2] Кибернетическая рука — 4000$
[3] Усилитель слуха — 1600$

Введите номер товара, который хотите купить: 1
Сколько единиц товара вы хотите купить? 1
Покупка прошла успешно!
Ваш текущий баланс: 2700 евродолларов
Желаете купить ещё что-нибудь? (y/n): y

Введите номер товара, который хотите купить: 3
Сколько единиц товара вы хотите купить? 2
Недостаточно средств. Попробуйте снова.

Введите номер товара, который хотите купить: 3
Сколько единиц товара вы хотите купить? 1
Покупка прошла успешно!
Ваш текущий баланс: 1100 евродолларов
Желаете купить ещё что-нибудь? (y/n): n

Итоговый заказ:
- Нейроинтерфейс ×1
- Усилитель слуха ×1
Оставшиеся евродоллары: 1100
```

## Советы

Проверяйте, что аргумент (баланс) передан, иначе выводите ошибку и завершайте работу скрипта.

Проверяйте, что пользователь вводит целые числа, как это требует условие. Проверку можно реализовать, например, так:

```
is_number() {
    [[ "$1" =~ ^[0-9]+$ ]]
}

if ! is_number "$quantity"; then
    echo "Введите целое число."
    continue
fi
```

Для работы с заказом рекомендуется хранить информацию в двух массивах: один — для индексов товаров, второй — для количества.

## Цели по теме Bash

| Тема                | Применение                                    |
| ------------------- | --------------------------------------------- |
| Аргументы           | Стартовое количество евродолларов             |
| Массивы             | Массивы заказов                               |
| Циклы               | Основной цикл выбора товаров                  |
| Условные выражения  | Проверка количества евродолларов, продолжения |
| Чтение с клавиатуры | Ввод номера, количества, y/n                  |

## Автоматическая проверка

Обратите внимание на то, что будет проверяться автоматически:

1. Наличие аргумента и правильная инициализация начального баланса.
2. Корректный вывод списка товаров.
3. Успешная покупка при достаточном балансе.
4. Отказ в покупке при недостаточном балансе.
5. Корректное накопление заказов в массив.
6. Финальный вывод с суммированием заказов и остатка средств.