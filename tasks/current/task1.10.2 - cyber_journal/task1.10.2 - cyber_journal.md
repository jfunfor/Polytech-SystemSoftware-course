# Тема Bash. Задание 2. Анализ кибер-журнала

В одном из переулков Найт-Сити вы нашли чип с журналом сообщений между агентами крупной корпорации. Каждая строка журнала содержит важную информацию, но не все записи актуальны. Ваша задача — написать Bash-скрипт, который будет анализировать этот журнал, извлекать строки с нужными паттернами и выводить отфильтрованные сообщения для дальнейшего анализа.

## Условие задания

1. Скрипт должен принимать в качестве аргумента имя текстового файла, содержащего кибер-журнал. Если файл не указан или не существует, скрипт выводит сообщение об ошибке и завершается.
2. Если файл пуст или не содержит нужных данных, скрипт должен корректно обработать этот случай (например, вывести сообщение «Нет подходящих записей»).
3. Скрипт должен извлечь все строки, содержащие кодовое слово, начинающееся с префикса `"AGENT-"` и за которым следуют ровно 4 цифры (например, `"AGENT-1234"`).  
    **Подсказка.** Регулярное выражение может выглядеть так:
    `AGENT-[0-9]{4}`
4. В конце работы скрипт должен вывести все найденные строки с дополнительным заголовком:
```
    Найденные сообщения:
    [номер строки] сообщение...
```

## Пример работы скрипта

Допустим, есть файл `cyber_journal.txt` со следующим содержимым:
```
2025-04-05 14:22:33 INFO Начало операции.
2025-04-05 14:23:01 WARN AGENT-1234 приближается к объекту.
2025-04-05 14:24:15 INFO Не удалось установить связь.
2025-04-05 14:25:42 INFO AGENT-5678 подтверждает задание.
2025-04-05 14:26:00 ERROR Сбой связи.
```
При выполнении команды:
```
$ ./cyber_filter.sh cyber_journal.txt
```
Скрипт должен вывести:
```
Найденные сообщения:
[2] 2025-04-05 14:23:01 WARN AGENT-1234 приближается к объекту.
[4] 2025-04-05 14:25:42 INFO AGENT-5678 подтверждает задание.
```

## Советы

Проверяйте аргументы и существование файла с журналом. Для этого можно использовать конструкцию:
```
if [[ -z "$1" ]]; then ...
```

Для чтения и фильтрации строк можно использовать регулярное выражение, приведенное ранее. Изучите мануал утилиты `grep` и разберитесь, какие аргументы должны быть переданы для вывода номеров строк.

Если нужно более сложное форматирование, следует использовать цикл:
```
while read -r line; do ... done < "$1"
```

Обрабатывайте пустой результат. Если в файле ничего не найдено, результат выполнения `grep` будет пустой строкой.

## Цели по теме Bash

| Тема               | Применение                                                            |
| ------------------ | --------------------------------------------------------------------- |
| Аргументы          | Путь к файлу                                                          |
| Массивы            | Хранение номеров строк (возможная реализация)                         |
| Циклы              | Цикл для построчной обработки (возможная реализация)                  |
| Условные выражения | Проверки: передан ли аргумент, существует ли файл, есть ли совпадения |

## Автоматическая проверка

Обратите внимание на то, что будет проверяться автоматически:

1. Проверка аргументов и корректное поведение скрипта при несуществующем файле.
2. Фильтрация по регулярному выражению.
3. Корректная нумерация строк.
4. Обработка пустого файла или отсутствия совпадений.
5. Корректное форматирование вывода.

