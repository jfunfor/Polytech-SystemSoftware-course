# Рез3рвная к0пия

Корпорации очень серьезно подходят к собственной безопасности: иногда дело доходит даже до взломов серверов полицейских участков. Вы - системный администратор одного из 
серверных парков Департамента Полиции Найт-Сити и вам поставлена задача по организации простой системы резервного копирования файлов с уликами.

Создайте `bash`-скрипт, который будет выполнять резервное копирование директории `/evidence/` с помощью `rsync` через ssh на удаленный сервер (необходимо поднять вторую 
виртуальную машину).

> "В работе с корпорациями важно понимать одно: у них есть все деньги мира, а у тебя - мозги и терминал. Если не пользоваться чем-то из этих двух вещей, то они смогут 
управлять нами, а мы и знать не будем. Поэтому придерживаемся политики обеспечения максимальной безопасности"

# Условие задания
1. Настроить новую ВМ Ubuntu Server 24 LTS. Запустить на ней `sshd`, добавить в автозапуск. Отредактировать конфигурацию `sshd`, так, чтобы ssh работал на порте `1984`. 
Впоследствии в скриптах явно указывать данный порт. Нужно это для того, чтобы злоумышленник не смог отследить, куда уходят бекапы, получив доступ к сети.
2. На локальном сервере создать ssh-ключи и отправить их на удаленный сервер
3. На локальном сервере написать скрипт `backup.sh`, который будет выполнять следующие задачи:
   - Создавать архив с **содержимым** директории `/evidence/`. Название должно соответствовать формату `evidence-<dd>.<mm>.<yyyy>.tar.gz`
   - Отправлять на удаленный сервер полученный архив, используя утилиту `rsync`. При этом обязательно использование ssh, с учетом нового порта.
	   - Необходимо создать лог-файл работы rsync, используя опцию `--log-file rsync_log.txt`

Скрипт добавить в файл конфигурации cron на запуск в 15:30 каждый день.

# Подсказки
1. Отправить ключи на сервер можно при помощи `ssh-copy-id`, либо же вручную - `cat ~/.ssh/id_rsa.pub | ssh <user>@<hostname> 'umask 0077; mkdir -p .ssh; cat >> 
.ssh/authorized_keys && echo "Key copied"'`
2. Прочитать о том, как использовать ssh как протокол в rsync, прочитайте `man rsync`. Вообще полезно читать man'ы!

# Методика автоматизированной проверки
0. Запускаем скрипт вручную
1. Проверяем лог rsync
2. Проверяется, есть ли сервис sshd на порте 22. Если пингуется, то проверка провалена
3. Распаковываем архив, который отправлялся на сервер. Проверяем содержимое на соответствие.
4. Проверяем корректность настройки cron
