# Логирование в Linux
Логирование — это важный аспект администрирования системы, который позволяет отслеживать события и диагностировать проблемы.

## Где хранятся все логи в Linux?

В Linux системные логи обычно хранятся в каталоге `/var/log`. Вот некоторые из основных файлов логов:

- **/var/log/syslog**: Общие системные логи.
- **/var/log/auth.log**: Логи аутентификации и безопасности.
- **/var/log/dmesg**: Логи ядра, генерируемые при загрузке системы.
- **/var/log/kern.log**: Логи ядра.
- **/var/log/boot.log**: Логи загрузки системы.

## Как работать с journalctl?

`journalctl` — это утилита для работы с системным журналом `systemd`. Она позволяет просматривать и фильтровать логи.

### Основные команды:

- **Просмотр всех логов**: 
  ```bash
  journalctl
  ```

- **Просмотр логов загрузки**:
  ```bash
  journalctl -b
  ```

- **Фильтрация по времени**:
  ```bash
  journalctl --since "2023-01-01" --until "2023-01-02"
  ```

- **Фильтрация по сервису**:
  ```bash
  journalctl -u имя_сервиса
  ```

- **Просмотр последних записей**:
  ```bash
  journalctl -f
  ```

## Как настроить ротацию логов?

Ротация логов — это процесс управления размерами и количеством файлов логов. В Linux для этого часто используется `logrotate`.

### Пример настройки `logrotate`:

1. Создайте файл конфигурации в `/etc/logrotate.d/` для вашего приложения.
2. Пример конфигурации:

   ```
   /var/log/имя_лога.log {
       daily
       missingok
       rotate 7
       compress
       delaycompress
       notifempty
       create 0640 root utmp
       sharedscripts
       postrotate
           /usr/bin/systemctl reload имя_сервиса > /dev/null
       endscript
   }
   ```

- **daily**: Ротация каждый день.
- **rotate 7**: Хранить 7 архивов.
- **compress**: Сжимать старые логи.
- **postrotate**: Действия после ротации.

## Что такое централизованный сбор логов и какие инструменты используются?

Централизованный сбор логов позволяет собирать логи с нескольких серверов в одном месте для удобного анализа и мониторинга.

### Основные инструменты:

- **Syslog**: Протокол для передачи логов по сети.
- **Rsyslog**: Расширенная версия syslog, поддерживающая ротацию, фильтрацию и отправку логов по сети.
- **Logstash**: Компонент Elastic Stack для сбора, обработки и отправки логов.
- **Fluentd**: Инструмент для сбора и передачи логов с гибкой конфигурацией.
- **Graylog**: Платформа для централизованного управления логами с веб-интерфейсом.

Централизованный сбор логов упрощает управление и анализ логов, позволяя быстро реагировать на инциденты и оптимизировать производительность системы.
