## **Работа в команде: Git, Code Review и процессы**  

### **1. PR/MR — «Дверь» для вашего кода в основную ветку**  

**PR (Pull Request) и MR (Merge Request)** — это не просто технические термины. Это способ сказать команде:  
*«Эй, я сделал что-то полезное — давайте обсудим, прежде чем это попадёт в общий код»*.  

#### **Как это работает на практике?**  
1. **Создаём ветку** (никогда не пишите прямо в `main`!):  
   ```bash
   git checkout -b feature/add-dark-mode
   ```  
   *(Название ветки должно сразу давать понять, что там — например, `fix/login-error` или `docs/update-readme`.)*  

2. **Делаем коммиты** — об этом подробнее ниже.  

3. **Пушим и создаём PR/MR**:  
   - GitHub/GitLab предложат кнопку «Create Pull Request» после `git push`.  
   - **Важно:**  
     - Описывайте изменения **понятно** (не «фикс бага», а «Исправлена ошибка валидации email при регистрации»).  
     - Добавьте скриншоты или тестовые данные, если это упрощает проверку.  

4. **Проходим ревью** (обсудим ниже).  
5. **Мержим** — если все согласны, что код готов.  

---  

### **2. Искусство коммитов: как не раздражать коллег**  

Плохие коммиты выглядят так:  
```
fix bug
```  
или ещё хуже:  
```
qwe
```  

**Как делать правильно:**  

#### **Правило 1: Одна задача — один коммит**  
- Не смешивайте исправление бага и рефакторинг.  
- Если поняли, что сделали лишнее — `git reset` или `git commit --amend`.  

#### **Правило 2: Структура сообщения**  
```
тип(область): краткое описание | до 50 символов

Подробное пояснение (если нужно):
- Что изменили?
- Почему это важно?
- Какие риски?
```  

**Пример отличного коммита:**  
```
feat(auth): add Google OAuth login

- Integrated Google OAuth2 SDK  
- Updated User model to store provider tokens  
- Added tests for auth flow (see #123)  
```  

**Типы коммитов (можно адаптировать под проект):**  
- `feat` — новая функциональность.  
- `fix` — исправление.  
- `refactor` — изменения кода без нового функционала.  
- `docs` — документация.  
- `style` — форматирование (отступы, точки с запятой).  
- `test` — всё, что связано с тестами.  

---  

### **3. Git Flow и альтернативы: что выбрать?**  

#### **Классический Git Flow**  
*(Подходит для продуктов с долгими релизными циклами — например, мобильные приложения.)*  

- Ветки:  
  - `main` — только стабильные версии.  
  - `develop` — текущая разработка.  
  - `feature/*` — каждая фича в отдельной ветке.  
  - `release/*` — подготовка к выпуску.  
  - `hotfix/*` — срочные патчи.  

**Минусы:** Сложно, если релизы каждую неделю.  

#### **Упрощённые варианты**  
1. **GitHub Flow** (`main` + feature-ветки + PR):  
   - Нет `develop` — всё мержится в `main`.  
   - Подходит для сервисов с непрерывным деплоем (веб-приложения).  

2. **Trunk-Based Development** (TBD):  
   - Все пишут прямо в `main` (да, так можно!).  
   - Но требуются **очень** хорошие тесты и CI/CD.  

---  

### **4. Code Review: как не получить «всё плохо, переделывай»**  

**Цель ревью — не найти виноватого, а улучшить код.**  

#### **Как готовиться к ревью (для автора):**  
- Проверьте себя:  
  - Код запускается? (`npm start`, `make build`)  
  - Тесты проходят?  
  - Соответствует ли стилю проекта? (используйте `eslint`, `rubocop` и т.д.)  
- Добавьте **контекст** в описание PR:  
  - «Этот PR закрывает задачу #123»  
  - «Особенность: нужно тестировать на API версии 2.5+»  

#### **Как проводить ревью (для ревьювера):**  
- **Технические аспекты:**  
  - Логика: нет ли утечек памяти? Ошибок в условиях?  
  - Безопасность: SQL-инъекции, валидация входных данных?  
- **Читаемость:**  
  - Понятны ли названия переменных?  
  - Нет ли «магических чисел»?  
- **Стиль:**  
  - Отступы, кавычки — как в проекте.  

**Фразы для мягкого ревью:**  
- «Может, стоит переименовать `temp` в `userSessionToken`?»  
- «Как ты думаешь, этот метод можно вынести в отдельный сервис?»  

---  

### **Итог: Главные правила**  
1. **PR/MR** — это диалог, а не формальность.  
2. **Коммиты** — как заметки для будущего себя (и коллег).  
3. **Ветки** — выбирайте модель под проект (не усложняйте без нужды).  
4. **Code Review** — учимся, а не критикуем.  
